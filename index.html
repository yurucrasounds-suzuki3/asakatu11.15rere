<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>郵便番号で住所検索＆地図表示</title>
  <link rel="stylesheet" href="https://unpkg.com/modern-css-reset/dist/reset.min.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <header class="container">
    <h1>郵便番号で住所検索＆地図表示</h1>
  </header>

  <main class="container">
    <div class="tabs">
      <button class="tab-button active" data-tab="zipcode">郵便番号から住所検索</button>
      <button class="tab-button" data-tab="address">住所から郵便番号検索</button>
    </div>

    <div class="tab-content active" id="zipcode-tab">
      <section class="card">
        <h2>郵便番号から住所検索</h2>
        <form id="searchForm">
          <label for="zipcode">郵便番号（7桁、ハイフン可）</label>
          <div class="row">
            <input id="zipcode" name="zipcode" inputmode="numeric" autocomplete="postal-code" placeholder="1000001 または 100-0001" />
            <button type="submit" id="searchBtn">検索</button>
          </div>
          <p class="help">例: 100-0001（東京都千代田区千代田）</p>
        </form>

        <div id="status" aria-live="polite"></div>
        <div id="result" class="result hidden">
          <h2>検索結果</h2>
          <dl>
            <div class="dl-row"><dt>都道府県</dt><dd id="pref"></dd></div>
            <div class="dl-row"><dt>市区町村</dt><dd id="city"></dd></div>
            <div class="dl-row"><dt>町域</dt><dd id="town"></dd></div>
            <div class="dl-row"><dt>住所（結合）</dt><dd id="fullAddress"></dd></div>
            <div class="dl-row"><dt>郵便番号</dt><dd id="zipcodeResult"></dd></div>
          </dl>
        </div>
      </section>
    </div>

    <div class="tab-content" id="address-tab">
      <section class="card">
        <h2>住所から郵便番号検索</h2>
        <form id="addressForm">
          <label for="addressInput">住所（都道府県から入力）</label>
          <div class="row">
            <div class="address-input-container">
              <input id="addressInput" name="addressInput" placeholder="例: 東京都千代田区千代田" autocomplete="off" />
              <div id="addressSuggestions" class="suggestions hidden"></div>
            </div>
          </div>
          <p class="help">例: 東京都千代田区千代田</p>
        </form>

        <div id="addressStatus" aria-live="polite"></div>
        <div id="addressResult" class="result hidden">
          <h2>検索結果</h2>
          <dl>
            <div class="dl-row"><dt>郵便番号</dt><dd id="zipcodeFromAddress"></dd></div>
            <div class="dl-row"><dt>都道府県</dt><dd id="prefFromAddress"></dd></div>
            <div class="dl-row"><dt>市区町村</dt><dd id="cityFromAddress"></dd></div>
            <div class="dl-row"><dt>町域</dt><dd id="townFromAddress"></dd></div>
            <div class="dl-row"><dt>住所（結合）</dt><dd id="fullAddressFromAddress"></dd></div>
          </dl>
        </div>
      </section>
    </div>

    <section class="card">
      <h2>地図</h2>
      <div id="map" class="map"></div>
    </section>
  </main>

  <footer class="container foot">
    <small>
      住所データ: <a href="https://zipcloud.ibsnet.co.jp/" target="_blank" rel="noreferrer">zipcloud</a> /
      地図: <a href="https://www.openstreetmap.org/" target="_blank" rel="noreferrer">OpenStreetMap</a> & <a href="https://leafletjs.com/" target="_blank" rel="noreferrer">Leaflet</a>
    </small>
  </footer>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script src="./app.js"></script>
</body>
</html>
